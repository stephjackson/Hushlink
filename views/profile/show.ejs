<section>
    <div class="d-lg-none inner-feed hush-footer text-light">
      <div class="row">
        <div class="col flex-row flex-wrap align-items-baseline justify-content-center pt-3">
            <i class="card-image-top fas fa-fw fa-5x pl-4 pt-3 text-center"></i>
            <h4 class="mt-3 pl-4"><%= profileName %>'s profile</h4>
        </div>
        <div class="col d-flex flex-column flex-wrap align-items-baseline justify-content-center mt-3">
            <a class="btn btn-outline-light mb-3" href="/<%= profileName %>/followers">Their Followers</a>
            <a class="btn btn-outline-light mb-3" href="/<%= profileName %>/following">Their Followees</a>
            <% bool = false %>
            <% if (session != undefined) { %>
            <form class="" action="/<%= profileName %>/follow" method="POST">
              <button class="btn btn-outline-light">
                  <% session.following.forEach(function(user) { %>
                    <% if (user.equals(user_id)) { %>
                      <% bool = true%>
                    <% } %>
                  <% }) %>
                  <% if (bool) { %>
                    Unfollow
                  <% } else { %>
                    Follow
                  <% } %>
              </button>
            </form>
            <% } %>
        </div>
      </div>
    </div>
  </section>
<section>
    <div class="d-none d-lg-block inner-search hush-footer text-light">
      <div class="row">
        <div class="col d-flex flex-row flex-wrap align-items-baseline justify-content-start ml-5">
          <i class="card-image-top fas fa-fw fa-5x pl-4 pt-3"></i>
          <h4 class="mt-4 pl-4"><%= profileName %>'s profile</h4>
          <a class="ml-3 text-light align-self-baseline mb-5 h5" href="/<%= profileName %>/followers">Their Followers</a>
          <a class="ml-3 text-light align-self-baseline h5" href="/<%= profileName %>/following">Their Followees</a>
          <% bool = false %>
          <% if (session != undefined) { %>
          <form class="align-self-center mb-3 mt-4" action="/<%= profileName %>/follow" method="POST">
            <div class="mt-2">
              <button class="btn btn-hushlink ml-3 button-text-size">
                  <% session.following.forEach(function(user) { %>
                    <% if (user.equals(user_id)) { %>
                      <% bool = true%>
                    <% } %>
                  <% }) %>
                  <% if (bool) { %>
                    Unfollow
                  <% } else { %>
                    Follow
                  <% } %>
              </button>
            </div>
          </form>
          <% } %>
        </div>
      </div>
    </div>
  </section>
<div class="row no-gutters">
    <div class="col-lg-2 sidebar d-none d-lg-block">
      <div class="inner-profile">
        <div class="row d-flex justify-content-center">
          <div class="profile-card card col-8 pt-2">
            <i class="card-image-top fas fa-fw fa-5x mr-4 mt-2 text-center"></i>
            <p class="pt-2 card-title"><a href="/<%= username %>">Hello @<%= username %>!</a></p>
            <a class="btn btn-outline-light mb-3" href="/posts">Your Posts</a>
            <a class="btn btn-outline-light mb-3" href="/followers">Followers</a>
            <a class="btn btn-outline-light mb-3" href="/following">Following</a>
          </div>
        </div>
      </div>
    </div>
    <div class="col">
      <div class="inner-profile">
        <ul class="list-unstyled">
          <% hushes.forEach(function(hush) { %>
          <li class="px-4 media individual-post">
            <i class="fas fa-fw fa-5x mr-4 mt-2"></i>
            <div class="media-body">
              <div class="row">
                <div class="col-3">
                  <a class="hushlink-link d-block h5" href="/<%= hush.username %>">@<%= hush.username %></a>
                  <div class="d-lg-none">
                    <a class="hushlink-link" href="<%= hush.hush %>"><span class="concat-link"><%= hush.hush %></span></a>
                    <p class="mt-2 no-wordwrap"><%= moment(hush.created_at).fromNow() %> </p>
                  </div>
                  </div>
                  <div class="col-9 d-none d-lg-block ml-auto">
                    <a id="hush-link" class="hushlink-link" href="<%= hush.hush %>"><span class="concat-link"><%= hush.hush %></span></a>
                    <p class="mt-4 pt-1"><%= moment(hush.created_at).fromNow() %> </p>
                  </div>
                </div>
              </div>
          </li>
          <hr>
          <% }) %>
        </ul>
      </div>
    </div>
    <div class="col-lg-2 d-none d-lg-block sidebar">
        <div class="inner-profile">
            <div class="row d-flex justify-content-center">
                <div class="profile-card card col-8 pt-3">
                  <div class="row">
                    <div class="col-12">
                        <a class="btn btn-outline-light mb-3 ml-1" href="/users">Show All Users</a>
                        <h6 class="mb-3">Suggested Users:</h6>
                        <% bool = false %>
                        <% if (session !== undefined) { %>
                      <% randomUsers.forEach(function(user) { %>
                        <i class="fas fa-fw fa-3x mb-2"></i>
                        <a class="ml-1 h5 d-block" href="/<%= user.username %>"><%= user.username %></a>
                        <% session.following.forEach(function(id) { %>
                          <% if (id.toString() === user._id.toString()) { %>
                          <% bool = true } %>
                        <% }) %>
                        <form class="" action="/<%= user.username %>/follow" method="POST">
                          <button class="mb-3 btn btn-outline-light">
                            <% if (bool) { %>
                              Unfollow
                            <% } else { %>
                              Follow
                            <% } %>
                          </button>
                          <% bool = false %>
                        </form>
                      <% }) %>
                      <% } %>
                      <p><small>&copy;2018 Stephen Jackson</small></p>
                      <span class="d-inline-block mb-2"><a href="https://github.com/stephjackson"><small>Github </small></a>
                        <a href="https://www.linkedin.com/in/steph-jackson/"><small>LinkedIn</small></a></span>
                </div>
              </div>
        </div>
      </div>
  </div>

  <% if (typeof(errorMessage) != "undefined") { %>
    <div>
      <%= errorMessage %>
    </div>
  <% } %>

  <script>
    var fa = ['fa-chess', 'fa-chess-rook', 'fa-chess-queen', 'fa-chess-pawn', 'fa-chess-knight', 'fa-chess-king', 'fa-chess-bishop']
    function randomIcon() {
      return fa[parseInt(Math.random() * fa.length)];
    }

    function changeIcon() {
      let icons = document.querySelectorAll('.fas');
      for (var i = 1; i < icons.length; i++) {
        icons[i].classList.add(randomIcon());
      }
    }
    
    changeIcon();
  </script>